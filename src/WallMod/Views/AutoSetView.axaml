<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:convs="using:WallMod.Converters"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="75"
             x:Class="WallMod.Views.AutoSetView"
             xmlns:vm="using:WallMod.ViewModels"
             x:DataType="vm:AutoSetViewModel">

	<!-- one horizontal area: LEFT sticky, RIGHT single-row scroller -->
	<Grid ColumnDefinitions="Auto,Auto,*" Margin="8">

		<!-- ===== LEFT (sticky) ===== -->
		<Border CornerRadius="6" Padding="6" MinWidth="420" Margin="0,0,8,0">
			<StackPanel Spacing="4">

				<!-- Title (left) + full time controls (right) -->
				<Border CornerRadius="6" Padding="4">
					<Grid ColumnDefinitions="Auto,72,Auto" VerticalAlignment="Center">

						<!-- Title -->
						<TextBlock Grid.Column="0"
								   Text="Autoset"
								   FontWeight="Bold"
								   FontSize="14"
								   Foreground="White"
								   VerticalAlignment="Center"/>

						<!-- radio buttons (horizontal) -->
						<StackPanel Grid.Column="2"
									Orientation="Horizontal"
									Spacing="24"
									VerticalAlignment="Center">
							<RadioButton Content="Custom"
										 FontSize="12"
										 GroupName="QueueChoice"
										 Command="{Binding queueChoiceCommand}"
										 CommandParameter="Custom"
										 IsChecked="{Binding CustomQueueViewVisible, Mode=TwoWay}"
										 Foreground="White"/>
							<RadioButton Content="Random"
										 FontSize="12"
										 GroupName="QueueChoice"
										 Command="{Binding queueChoiceCommand}"
										 CommandParameter="Random"
										 IsChecked="{Binding RandomQueueViewVisible, Mode=TwoWay}"
										 Foreground="White"/>
						</StackPanel>

					</Grid>
				</Border>

				<!-- Single compact row: choice + per-mode actions (keeps height minimal) -->
				<Border CornerRadius="6" Padding="4">
					<Grid ColumnDefinitions="Auto,16,Auto,8,Auto">

						<!-- Label -->
						<TextBlock Grid.Column="0"
								   Text="Change wallpaper every"
								   FontSize="12"
								   Foreground="White"
								   VerticalAlignment="Center"/>

						<!-- Number -->
						<NumericUpDown Grid.Column="2"
									   Minimum="1"
									   Value="{Binding TimeValueInput, Mode=TwoWay}"
									   Height="16"
									   FontSize="13"
									   Width="120"
									   FormatString="0"
									   VerticalAlignment="Center"/>

						<!-- Unit -->
						<ComboBox Grid.Column="4"
								  SelectedIndex="{Binding SelectedTimeUnitIndex, Mode=TwoWay}"
								  MinHeight="32"
								  Height="32"
								  FontSize="13"
								  Width="100"
								  VerticalAlignment="Center">
							<ComboBoxItem Content="seconds"/>
							<ComboBoxItem Content="minutes"/>
							<ComboBoxItem Content="hours"/>
							<ComboBoxItem Content="days"/>
							<ComboBoxItem Content="weeks"/>
							<ComboBoxItem Content="months"/>
						</ComboBox>

					</Grid>
				</Border>

			</StackPanel>
		</Border>

		<!-- Vertical divider between sections -->
		<Rectangle Grid.Column="1" Width="4" Margin="0,10,12,10" Fill="{Binding SelectedPrimaryAccentColour, Converter={StaticResource ColorToBrushConverter}}"/>

		
		<!-- ===== RIGHT ===== -->
		<Border Grid.Column="2" CornerRadius="6" Padding="4">
			<Grid>

				<!-- Custom Queue -->
				<Grid ColumnDefinitions="Auto,*"
					  IsVisible="{Binding CustomQueueViewVisible}">

					<!-- CUSTOM controls: Enable/Disable + Clear queue -->
					<StackPanel Grid.Column="0"
								Orientation="Vertical"
								Spacing="6"
								VerticalAlignment="Center"
								Margin="8,0,0,0">

						<!-- Enable / Disable buttons -->
						<StackPanel Orientation="Horizontal" Spacing="4">
							<Button Content="Enable"
									Background="DarkGreen"
									Foreground="White"
									FontSize="11"
									Command="{Binding ExecEnableCustomAutoSet}"
									IsEnabled="{Binding CustomAutoSetEnableButtonEnabled}"/>

							<Button Content="Disable"
									Background="DarkRed"
									Foreground="White"
									FontSize="11"
									Command="{Binding ExecDisableCustomAutoSet}"
									IsEnabled="{Binding CustomAutoSetDisableButtonEnabled}"/>
						</StackPanel>

						<!-- Clear and skip buttons -->
						<StackPanel Orientation="Horizontal" Spacing="4">
							<Button Content="Clear Queue"
									Click="ClearWallpaperQueue"
									FontSize="11"
									Background="Red"/>

							<Button Content=">"
									Background="Transparent"
									Command="{Binding skipCustomAutoSetImageButton}">
								<Image Source="avares://Wallmod/Assets/skip-icon.png" Width="14" Height="14"/>
							</Button>
						</StackPanel>
						
						
					</StackPanel>

					<!-- Custom queue thumbnails (outer ScrollViewer owns the scrolling) -->
					<ScrollViewer Grid.Column="1"
								  x:Name="CustomScroll"
								  HorizontalScrollBarVisibility="Auto"
								  VerticalScrollBarVisibility="Disabled"
								  Height="84">
						<ListBox x:Name="QueueListBox"
								 ItemsSource="{Binding WallpaperQueue}"
								 Background="Transparent"
								 BorderThickness="0"
								 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
								 ScrollViewer.VerticalScrollBarVisibility="Disabled"
								 DragDrop.AllowDrop="True"
								 DragDrop.DragOver="ListBox_DragOver"
								 DragDrop.Drop="ListBox_Drop"
								 HorizontalAlignment="Left"
								 VerticalAlignment="Center">
							<ListBox.ItemsPanel>
								<ItemsPanelTemplate>
									<StackPanel Orientation="Horizontal"/>
								</ItemsPanelTemplate>
							</ListBox.ItemsPanel>

							<ListBox.ItemTemplate>
								<DataTemplate>
									<Border CornerRadius="6"
											Margin="3,0"
											Cursor="SizeAll"
											ToolTip.Tip="{Binding Name}"
											PointerPressed="Item_PointerPressed"
											PointerMoved="Item_PointerMoved"
											PointerReleased="Item_PointerReleased">
										<Image Source="{Binding ImageThumbnailBitmap}"
											   Width="120"
											   Height="72"
											   Stretch="UniformToFill"
											   ClipToBounds="True"/>
									</Border>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>
					</ScrollViewer>

					<!-- drag-drop insertion indicator -->
					<Canvas x:Name="DropIndicator"
							IsHitTestVisible="False"
							Panel.ZIndex="1"
							IsVisible="{Binding CustomQueueViewVisible}">
						<Border x:Name="InsertLine"
								Background="{Binding SelectedPrimaryAccentColour, Converter={StaticResource ColorToBrushConverter}}"
								Width="2"
								Height="64"
								IsVisible="False"/>
					</Canvas>
					
				</Grid>



				<!-- Random Queue -->
				<ScrollViewer x:Name="RandomScroll"
							  HorizontalScrollBarVisibility="Auto"
							  VerticalScrollBarVisibility="Disabled"
							  IsVisible="{Binding RandomQueueViewVisible}"
							  VerticalAlignment="Center">
					<Grid	RowDefinitions="Auto,4,Auto"
							ColumnDefinitions="Auto,24,Auto,48,*"
							Margin="8,0,0,0"
							VerticalAlignment="Center">

						<!-- RANDOM controls: Enable/Disable + Browse -->
						<StackPanel	Grid.Row="0"
									Grid.RowSpan="3"
									Grid.Column="0"
									Orientation="Vertical"
									Spacing="4"
									VerticalAlignment="Center">
							<StackPanel Orientation="Horizontal"
										Spacing="4"
										HorizontalAlignment="Left">
								<Button Content="Enable"
										Background="DarkGreen"
										Foreground="White"
										Command="{Binding ExecEnableRandomAutoSet}"
										IsEnabled="{Binding RandomAutoSetEnableButtonEnabled}"
										FontSize="11"/>

								<Button Content="Disable"
										Background="DarkRed"
										Foreground="White"
										Command="{Binding ExecDisableRandomAutoSet}"
										IsEnabled="{Binding RandomAutoSetDisableButtonEnabled}"
										FontSize="11"/>
							</StackPanel>



							<CheckBox Height="12" FontSize="12" IsChecked="{Binding RandomizeEachMonitor, Mode=TwoWay}">
								Randomize All Monitors
							</CheckBox>
								

						</StackPanel>

						<Button Grid.Row="0"
								Grid.Column="2"
								Content="Browseâ€¦"
								Command="{Binding execBrowseDirectory}"
								VerticalAlignment="Center"
								FontSize="11"/>
						
						<Button Grid.Row="2"
								Grid.Column="2"
								Content=">"
								Background="Transparent"
								VerticalAlignment="Top"
								HorizontalAlignment="Center"
								Command="{Binding skipRandomAutoSetImageButton}">
							<Image Source="avares://Wallmod/Assets/skip-icon.png" Width="14" Height="14"/>
						</Button>
						
						<!-- Random Queue Info -->
						<TextBlock Grid.Row="0"
								   Grid.Column="4"
								   FontSize="14"
								   Text="{Binding RandDirecName}"
								   Foreground="White"
								   VerticalAlignment="Center"/>

						<!-- Random Queue Info -->
						<TextBlock Grid.Row="2"
								   Grid.Column="4"
								   Text="{Binding RandWallpapersRemaining}"
								   Foreground="{Binding SelectedPrimaryAccentColour, Converter={StaticResource ColorToBrushConverter}}"
								   VerticalAlignment="Top"/>
						
					</Grid>
				</ScrollViewer>



			</Grid>
		</Border>

	</Grid>
</UserControl>
