<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="75"
             x:Class="WallMod.Views.AutoSetView"
             xmlns:vm="using:WallMod.ViewModels"
             x:DataType="vm:AutoSetViewModel">

  <!-- one horizontal area: LEFT sticky, RIGHT single-row scroller -->
  <Grid ColumnDefinitions="Auto,*" Margin="8">

    <!-- ===== LEFT (sticky) ===== -->
    <Border Background="#1e1e1e" CornerRadius="6" Padding="6" MinWidth="480" Margin="0,0,8,0">
      <StackPanel Spacing="4">

        <!-- Title (left) + full time controls (right) -->
        <Border Background="#222" CornerRadius="6" Padding="4">
          <Grid ColumnDefinitions="Auto,24,Auto,32" VerticalAlignment="Center">
            
			  
            <!-- Title -->
            <TextBlock Grid.Column="0"
                       Text="Autoset"
                       FontWeight="Bold"
                       FontSize="14"
                       Foreground="White"
                       VerticalAlignment="Center"/>

			<!-- radio buttons (horizontal) -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="6" VerticalAlignment="Center">
              <RadioButton Content="Custom"
                           FontSize="11"
                           GroupName="QueueChoice"
                           Command="{Binding queueChoiceCommand}"
                           CommandParameter="Custom"
                           IsChecked="{Binding CustomQueueViewVisible, Mode=TwoWay}"
                           Foreground="White"/>
              <RadioButton Content="Random"
                           FontSize="11"
                           GroupName="QueueChoice"
                           Command="{Binding queueChoiceCommand}"
                           CommandParameter="Random"
                           IsChecked="{Binding RandomQueueViewVisible, Mode=TwoWay}"
                           Foreground="White"/>
            </StackPanel>
			  
			<!-- grid for both queue button types -->
            <Grid Grid.Column="4">

				<!-- CUSTOM actions -->
            <Grid   IsVisible="{Binding CustomQueueViewVisible}"
                    ColumnDefinitions="Auto,12,Auto,24,Auto,10,Auto"
                    VerticalAlignment="Center">
                <Button Grid.Column="0"
                        Content="Enable"
                        Background="DarkGreen"
                        Foreground="White"
                        Command="{Binding ExecEnableCustomAutoSet}"
                        IsEnabled="{Binding CustomAutoSetEnableButtonEnabled}"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"/>

                <Button Grid.Column="2"
                        Content="Disable"
                        Background="DarkRed"
                        Foreground="White"
                        Command="{Binding ExecDisableCustomAutoSet}"
                        IsEnabled="{Binding CustomAutoSetDisableButtonEnabled}"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"/>

                <!-- Clear queue placed uniquely at far right of the same row -->
                <Button Grid.Column="4"
                        Content="Clear queue"
                        Click="ClearWallpaperQueue"
                        HorizontalAlignment="Right"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"
		                Background="Red"/>
            </Grid>			  
		      
              <!-- RANDOM actions -->
              <Grid IsVisible="{Binding RandomQueueViewVisible}"
                    ColumnDefinitions="Auto,6,Auto"
                    VerticalAlignment="Center">
                <Button Grid.Column="0"
                        Content="Enable"
                        Background="DarkGreen"
                        Foreground="White"
                        Command="{Binding ExecEnableRandomAutoSet}"
                        IsEnabled="{Binding RandomAutoSetEnableButtonEnabled}"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"/>

                <Button Grid.Column="2"
                        Content="Disable"
                        Background="DarkRed"
                        Foreground="White"
                        Command="{Binding ExecDisableRandomAutoSet}"
                        IsEnabled="{Binding RandomAutoSetDisableButtonEnabled}"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"/>

              </Grid>
            </Grid>
			  
            


          </Grid>
        </Border>

        <!-- Single compact row: choice + per-mode actions (keeps height minimal) -->
        <Border Background="#222" CornerRadius="6" Padding="4">
          <Grid ColumnDefinitions="Auto,16,Auto,8,Auto">
            
			<!-- Label -->
            <TextBlock Grid.Column="0"
                       Text="Change wallpaper every"
					   FontSize="12"
                       Foreground="White"
                       VerticalAlignment="Center"/>

            <!-- Number -->
            <NumericUpDown Grid.Column="2"
                           Minimum="1"
                           Value="7"
                           Height="16"
                           FontSize="13"
                           Width="120"
                           FormatString="0"
                           VerticalAlignment="Center"/>

            <!-- Unit -->
            <ComboBox Grid.Column="4"
                      SelectedIndex="1"
                      MinHeight="32"
					  Height="32"
                      FontSize="13"
                      Width="100"
                      VerticalAlignment="Center">
			  <ComboBoxItem Content="seconds"/>
              <ComboBoxItem Content="minutes"/>
              <ComboBoxItem Content="hours"/>
              <ComboBoxItem Content="days"/>
              <ComboBoxItem Content="weeks"/>
              <ComboBoxItem Content="months"/>
            </ComboBox>
			  
            
          </Grid>
        </Border>

      </StackPanel>
    </Border>
	  
	  
	  
	  
	
    <!-- ===== RIGHT (one-row scroller; tiles fit height) ===== -->
    <Border Grid.Column="1" Background="#202020" CornerRadius="8" Padding="4">
      <Grid ColumnDefinitions="Auto, 12, Auto">	  

        <!-- Custom queue thumbnails -->
        <ScrollViewer x:Name="CustomScroll"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Disabled"
                      Height="56"
                      IsVisible="{Binding CustomQueueViewVisible}">
          <ListBox x:Name="QueueListBox"
                   ItemsSource="{Binding WallpaperQueue}"
                   Background="Transparent"
                   BorderThickness="0"
                   Height="{Binding #CustomScroll.Bounds.Height}"
                   DragDrop.AllowDrop="True"
                   DragDrop.DragOver="ListBox_DragOver"
                   DragDrop.Drop="ListBox_Drop"
                   ScrollViewer.HorizontalScrollBarVisibility="Auto"
                   ScrollViewer.VerticalScrollBarVisibility="Disabled">
            <ListBox.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
              </ItemsPanelTemplate>
            </ListBox.ItemsPanel>

            <ListBox.ItemTemplate>
              <DataTemplate>
                <Border Background="#303030"
                        CornerRadius="6"
                        Margin="3,0"
                        Padding="0"
                        Cursor="SizeAll"
                        ToolTip.Tip="{Binding Name}"
                        PointerPressed="Item_PointerPressed"
                        PointerMoved="Item_PointerMoved"
                        PointerReleased="Item_PointerReleased">
                  <Image Source="{Binding ImageThumbnailBitmap}"
                         Width="{Binding #CustomScroll.Bounds.Height}"
                         Height="{Binding #CustomScroll.Bounds.Height}"
                         Stretch="UniformToFill"
                         ClipToBounds="True"/>
                </Border>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </ScrollViewer>

        <!-- Random mode lane (add preview tiles if desired) -->
        <ScrollViewer x:Name="RandomScroll"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Disabled"
                      Height="56"
                      IsVisible="{Binding RandomQueueViewVisible}">
			<Grid ColumnDefinitions="Auto,24,Auto">
                <Button Grid.Column="0"
                        Content="Browseâ€¦"
                        Command="{Binding execBrowseDirectory}"
                        HorizontalAlignment="Right"
                        MinHeight="18"
                        Padding="8,2"
                        FontSize="11"/>
                <TextBlock Grid.Column="2"
                            Text="{Binding RandWallpapersRemaining}"
                            Foreground="Aqua"
                            VerticalAlignment="Center"/>	
			</Grid>
        </ScrollViewer>

        <!-- drag-drop insertion indicator -->
        <Canvas x:Name="DropIndicator"
                IsHitTestVisible="False"
                Panel.ZIndex="1"
                IsVisible="{Binding CustomQueueViewVisible}">
          <Border x:Name="InsertLine"
                  Background="Aqua"
                  Width="2"
                  Height="{Binding #CustomScroll.Bounds.Height}"
                  IsVisible="False"/>
        </Canvas>
	  
	
      </Grid>
    </Border>

  </Grid>
</UserControl>
